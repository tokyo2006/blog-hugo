---
date: 2023-11-25
title: "运维眼中的CI流程"
description: "运维眼中的CI流程"
Section: post
Slug: 运维眼中的CI流程
Topics:
 - Devops
Tags:
 - devops
 - lifecycle
 - shell 
 - jenkins
 - buildkite
 - Github Actions
---


    软件开发中的测试构建就是一个不断循环的过程，软件就是在这个过程中不断地迭代更新，这里就会涉及一个软件持续构建的流程，就是我们通常说的CI(Continus Intergration)持续集成。
<!--more-->

我使用过一些集成工具，最开始使用的是Jenkins,后来使用过Github Action,Buildkite。它们的功能都很强大，非常适合公司来用作CICD的平台。不过对于流程来说用哪个工具都是一样的，只是实现的方式不一样罢了。良好的CI流程对于软件开发是非常重要的，它能大大提高团队协作的效率。不过这些需要团队成员有良好的代码验证和测试的意识。在CI流程中我们会遇到各种情况，我通常会分成一下几种情况来讨论。

### 开发新功能以及BUG修复

![ci_new_feature_pipeline](https://res.cloudinary.com/xinta/image/upload/v1701831788/blogimage/ci_new_feature.png)

- 开发提交PR以后会触发验证和单元测试的JOB
- 验证成功并通过测试的分支还需要团队成员的检查并合并到开发分支中
- 开发分支的变化会触发构建并上传构建品到仓库
- 测试环境会部署新的构建产品并执行E2E测试
- 通过集成测试后整个CI流程就结束了（接下来的就是CI流程了） 

对于不同的公司在CI流程中也有不同的流程，但是大体上都应该遵循验证，测试，构建，集成测试的流程，上图中举了例子来简单的描绘了2种不同的情况。

### Hotfix

- 开发从主分支中签出hotfix分支提交PR以后会触发验证和单元测试的JOB
- 验证成功并通过测试的分支还需要团队成员的检查并合并到开发分支中
- 开发分支的变化会触发构建并上传构建品到仓库
- 测试环境会部署新的构建产品并执行E2E测试
- 测试成功后会从hotfix分支忘主分支提交新的PR并忽略所有的测试直接合并到主分支中

### 产品回滚

— 回滚的PR不参与任何测试流程直接快速部署到产线中去
